<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Queue Calculator (M/M/1, M/M/c)</title>
  <link rel="stylesheet" href="src/style.css" />
</head>
<body>
  <main class="container">
    <header class="hero">
      <h1>Queue Calculator</h1>
      <p class="subtitle">Poisson arrivals · Exponential service · Steady-state performance metrics</p>
    </header>

    <section class="panel">
      <form id="calc-form">
        <div class="row">
          <label>Model</label>
          <div class="segmented" role="tablist" aria-label="Queue model">
            <input type="radio" id="model-mm1" name="model" value="mm1" checked />
            <label for="model-mm1">M/M/1</label>
            <input type="radio" id="model-mmc" name="model" value="mmc" />
            <label for="model-mmc">M/M/c</label>
          </div>
        </div>

        <div class="row">
          <label for="lambda">Arrival rate (λ)</label>
          <input id="lambda" name="lambda" type="number" inputmode="decimal" step="any" min="0" required placeholder="e.g., 2.5" />
        </div>

        <div class="row">
          <label for="mu">Service rate (μ)</label>
          <input id="mu" name="mu" type="number" inputmode="decimal" step="any" min="0" required placeholder="e.g., 3.5" />
        </div>

        <div class="row" id="servers-row" hidden>
          <label for="servers">Number of servers (c)</label>
          <input id="servers" name="servers" type="number" inputmode="numeric" step="1" min="1" value="2" />
        </div>

        <div class="row">
          <label for="units">Units</label>
          <div class="select-wrap">
            <select id="units" name="units">
              <option value="per_hour">per hour</option>
              <option value="per_min">per minute</option>
              <option value="per_sec">per second</option>
            </select>
          </div>
        </div>

        <div class="actions">
          <button type="submit">Calculate</button>
          <span class="hint">Stability: M/M/1 → λ &lt; μ · M/M/c → λ &lt; c·μ (ρ &lt; 1)</span>
        </div>
      </form>
      <div id="error" class="error hidden" role="alert"></div>
    </section>

    <section id="results" class="card hidden" aria-live="polite">
      <h2>Results</h2>
      <div class="metrics">
        <div class="metric"><div class="k">Model</div><div class="v" id="out-model">—</div></div>
        <div class="metric"><div class="k">Servers (c)</div><div class="v" id="out-c">—</div></div>
        <div class="metric"><div class="k">Utilization (ρ)</div><div class="v" id="rho">—</div></div>

        <div class="metric"><div class="k">L (avg. in system)</div><div class="v" id="L">—</div></div>
        <div class="metric"><div class="k">L<sub>q</sub> (avg. in queue)</div><div class="v" id="Lq">—</div></div>
        <div class="metric"><div class="k">W (avg. time in system)</div><div class="v" id="W">—</div></div>
        <div class="metric"><div class="k">W<sub>q</sub> (avg. waiting time)</div><div class="v" id="Wq">—</div></div>

        <div class="metric"><div class="k">P<sub>0</sub> (idle probability)</div><div class="v" id="P0">—</div></div>
        <div class="metric"><div class="k">P<sub>w</sub> (waiting probability)</div><div class="v" id="Pw">—</div></div>
      </div>

      <details class="formulae">
        <summary>Show formulas</summary>
        <div id="formulae-content"></div>
      </details>
    </section>

    <footer class="footer">
      <p>Built with vanilla JS · <a id="repo-link" href="#" target="_blank" rel="noopener">GitHub</a></p>
    </footer>
  </main>

  <script type="module" src="src/app.js"></script>
</body>
</html>
